{"ast":null,"code":"var _jsxFileName = \"/private/var/www/html/dev-app/temp/talking-avatar/src/App.js\",\n  _s = $RefreshSig$();\n// src/App.js\nimport React, { useEffect, useMemo, useRef, useState } from \"react\";\nimport Lottie from \"lottie-react\";\nimport talkingAvatar from \"./talking-avatar.json\";\nimport \"./App.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const avatarRef = useRef();\n  const [voices, setVoices] = useState([]);\n\n  // Load voices (some browsers populate asynchronously)\n  useEffect(() => {\n    const synth = window.speechSynthesis;\n    const load = () => {\n      const v = synth.getVoices();\n      if (v && v.length) setVoices(v);\n    };\n\n    // Try immediately…\n    load();\n\n    // …and also when the voices list changes\n    if (typeof synth.onvoiceschanged !== \"undefined\") {\n      synth.addEventListener(\"voiceschanged\", load);\n      return () => synth.removeEventListener(\"voiceschanged\", load);\n    }\n  }, []);\n\n  // Helper: pick the best “Lekha” voice if available\n  const pickVoice = useMemo(() => {\n    const norm = s => (s || \"\").toLowerCase();\n\n    // 1) Exact/loose match on name containing \"lekha\"\n    const lekhas = voices.filter(v => norm(v.name).includes(\"lekha\"));\n\n    // Prefer hi-IN among Lekha variations\n    const lekhaHiIN = lekhas.find(v => norm(v.lang) === \"hi-in\");\n    if (lekhaHiIN) return lekhaHiIN;\n    if (lekhas[0]) return lekhas[0];\n\n    // 2) Fallback: any Hindi voice (hi or hi-IN)\n    const hindiExact = voices.find(v => norm(v.lang) === \"hi-in\");\n    if (hindiExact) return hindiExact;\n    const hindiAny = voices.find(v => norm(v.lang).startsWith(\"hi\"));\n    if (hindiAny) return hindiAny;\n\n    // 3) Final fallback: default voice\n    return null;\n  }, [voices]);\n  const handleTalk = () => {\n    const synth = window.speechSynthesis;\n\n    // Be nice: stop anything currently speaking\n    if (synth.speaking) synth.cancel();\n    const msg = new SpeechSynthesisUtterance(\"नमस्ते! आज मैं आपकी किस प्रकार सहायता कर सकता हूँ?\");\n    if (pickVoice) msg.voice = pickVoice;\n\n    // Start/stop avatar with speech\n    msg.onstart = () => {\n      var _avatarRef$current;\n      return (_avatarRef$current = avatarRef.current) === null || _avatarRef$current === void 0 ? void 0 : _avatarRef$current.play();\n    };\n    msg.onend = () => {\n      var _avatarRef$current2;\n      return (_avatarRef$current2 = avatarRef.current) === null || _avatarRef$current2 === void 0 ? void 0 : _avatarRef$current2.stop();\n    };\n    msg.onerror = () => {\n      var _avatarRef$current3;\n      return (_avatarRef$current3 = avatarRef.current) === null || _avatarRef$current3 === void 0 ? void 0 : _avatarRef$current3.stop();\n    };\n    synth.speak(msg);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Talking AI Avatar\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Lottie, {\n      lottieRef: avatarRef,\n      animationData: talkingAvatar,\n      loop: true,\n      autoplay: false,\n      style: {\n        height: 300\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleTalk,\n      children: pickVoice ? `Talk (Voice: ${pickVoice.name})` : \"Talk\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"Y/DZh/M/43fKUG61wYWcvsCb6BI=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useEffect","useMemo","useRef","useState","Lottie","talkingAvatar","jsxDEV","_jsxDEV","App","_s","avatarRef","voices","setVoices","synth","window","speechSynthesis","load","v","getVoices","length","onvoiceschanged","addEventListener","removeEventListener","pickVoice","norm","s","toLowerCase","lekhas","filter","name","includes","lekhaHiIN","find","lang","hindiExact","hindiAny","startsWith","handleTalk","speaking","cancel","msg","SpeechSynthesisUtterance","voice","onstart","_avatarRef$current","current","play","onend","_avatarRef$current2","stop","onerror","_avatarRef$current3","speak","className","children","fileName","_jsxFileName","lineNumber","columnNumber","lottieRef","animationData","loop","autoplay","style","height","onClick","_c","$RefreshReg$"],"sources":["/private/var/www/html/dev-app/temp/talking-avatar/src/App.js"],"sourcesContent":["// src/App.js\nimport React, { useEffect, useMemo, useRef, useState } from \"react\";\nimport Lottie from \"lottie-react\";\nimport talkingAvatar from \"./talking-avatar.json\";\nimport \"./App.css\";\n\nfunction App() {\n  const avatarRef = useRef();\n  const [voices, setVoices] = useState([]);\n\n  // Load voices (some browsers populate asynchronously)\n  useEffect(() => {\n    const synth = window.speechSynthesis;\n\n    const load = () => {\n      const v = synth.getVoices();\n      if (v && v.length) setVoices(v);\n    };\n\n    // Try immediately…\n    load();\n\n    // …and also when the voices list changes\n    if (typeof synth.onvoiceschanged !== \"undefined\") {\n      synth.addEventListener(\"voiceschanged\", load);\n      return () => synth.removeEventListener(\"voiceschanged\", load);\n    }\n  }, []);\n\n  // Helper: pick the best “Lekha” voice if available\n  const pickVoice = useMemo(() => {\n    const norm = (s) => (s || \"\").toLowerCase();\n\n    // 1) Exact/loose match on name containing \"lekha\"\n    const lekhas = voices.filter((v) => norm(v.name).includes(\"lekha\"));\n\n    // Prefer hi-IN among Lekha variations\n    const lekhaHiIN = lekhas.find((v) => norm(v.lang) === \"hi-in\");\n    if (lekhaHiIN) return lekhaHiIN;\n    if (lekhas[0]) return lekhas[0];\n\n    // 2) Fallback: any Hindi voice (hi or hi-IN)\n    const hindiExact = voices.find((v) => norm(v.lang) === \"hi-in\");\n    if (hindiExact) return hindiExact;\n\n    const hindiAny = voices.find((v) => norm(v.lang).startsWith(\"hi\"));\n    if (hindiAny) return hindiAny;\n\n    // 3) Final fallback: default voice\n    return null;\n  }, [voices]);\n\n  const handleTalk = () => {\n    const synth = window.speechSynthesis;\n\n    // Be nice: stop anything currently speaking\n    if (synth.speaking) synth.cancel();\n\n    const msg = new SpeechSynthesisUtterance(\n      \"नमस्ते! आज मैं आपकी किस प्रकार सहायता कर सकता हूँ?\"\n    );\n\n    if (pickVoice) msg.voice = pickVoice;\n\n    // Start/stop avatar with speech\n    msg.onstart = () => avatarRef.current?.play();\n    msg.onend = () => avatarRef.current?.stop();\n    msg.onerror = () => avatarRef.current?.stop();\n\n    synth.speak(msg);\n  };\n\n  return (\n    <div className=\"app\">\n      <h2>Talking AI Avatar</h2>\n      <Lottie\n        lottieRef={avatarRef}\n        animationData={talkingAvatar}\n        loop\n        autoplay={false}\n        style={{ height: 300 }}\n      />\n      <button onClick={handleTalk}>\n        {pickVoice ? `Talk (Voice: ${pickVoice.name})` : \"Talk\"}\n      </button>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":";;AAAA;AACA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,OAAO,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AACnE,OAAOC,MAAM,MAAM,cAAc;AACjC,OAAOC,aAAa,MAAM,uBAAuB;AACjD,OAAO,WAAW;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEnB,SAASC,GAAGA,CAAA,EAAG;EAAAC,EAAA;EACb,MAAMC,SAAS,GAAGR,MAAM,CAAC,CAAC;EAC1B,MAAM,CAACS,MAAM,EAAEC,SAAS,CAAC,GAAGT,QAAQ,CAAC,EAAE,CAAC;;EAExC;EACAH,SAAS,CAAC,MAAM;IACd,MAAMa,KAAK,GAAGC,MAAM,CAACC,eAAe;IAEpC,MAAMC,IAAI,GAAGA,CAAA,KAAM;MACjB,MAAMC,CAAC,GAAGJ,KAAK,CAACK,SAAS,CAAC,CAAC;MAC3B,IAAID,CAAC,IAAIA,CAAC,CAACE,MAAM,EAAEP,SAAS,CAACK,CAAC,CAAC;IACjC,CAAC;;IAED;IACAD,IAAI,CAAC,CAAC;;IAEN;IACA,IAAI,OAAOH,KAAK,CAACO,eAAe,KAAK,WAAW,EAAE;MAChDP,KAAK,CAACQ,gBAAgB,CAAC,eAAe,EAAEL,IAAI,CAAC;MAC7C,OAAO,MAAMH,KAAK,CAACS,mBAAmB,CAAC,eAAe,EAAEN,IAAI,CAAC;IAC/D;EACF,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA,MAAMO,SAAS,GAAGtB,OAAO,CAAC,MAAM;IAC9B,MAAMuB,IAAI,GAAIC,CAAC,IAAK,CAACA,CAAC,IAAI,EAAE,EAAEC,WAAW,CAAC,CAAC;;IAE3C;IACA,MAAMC,MAAM,GAAGhB,MAAM,CAACiB,MAAM,CAAEX,CAAC,IAAKO,IAAI,CAACP,CAAC,CAACY,IAAI,CAAC,CAACC,QAAQ,CAAC,OAAO,CAAC,CAAC;;IAEnE;IACA,MAAMC,SAAS,GAAGJ,MAAM,CAACK,IAAI,CAAEf,CAAC,IAAKO,IAAI,CAACP,CAAC,CAACgB,IAAI,CAAC,KAAK,OAAO,CAAC;IAC9D,IAAIF,SAAS,EAAE,OAAOA,SAAS;IAC/B,IAAIJ,MAAM,CAAC,CAAC,CAAC,EAAE,OAAOA,MAAM,CAAC,CAAC,CAAC;;IAE/B;IACA,MAAMO,UAAU,GAAGvB,MAAM,CAACqB,IAAI,CAAEf,CAAC,IAAKO,IAAI,CAACP,CAAC,CAACgB,IAAI,CAAC,KAAK,OAAO,CAAC;IAC/D,IAAIC,UAAU,EAAE,OAAOA,UAAU;IAEjC,MAAMC,QAAQ,GAAGxB,MAAM,CAACqB,IAAI,CAAEf,CAAC,IAAKO,IAAI,CAACP,CAAC,CAACgB,IAAI,CAAC,CAACG,UAAU,CAAC,IAAI,CAAC,CAAC;IAClE,IAAID,QAAQ,EAAE,OAAOA,QAAQ;;IAE7B;IACA,OAAO,IAAI;EACb,CAAC,EAAE,CAACxB,MAAM,CAAC,CAAC;EAEZ,MAAM0B,UAAU,GAAGA,CAAA,KAAM;IACvB,MAAMxB,KAAK,GAAGC,MAAM,CAACC,eAAe;;IAEpC;IACA,IAAIF,KAAK,CAACyB,QAAQ,EAAEzB,KAAK,CAAC0B,MAAM,CAAC,CAAC;IAElC,MAAMC,GAAG,GAAG,IAAIC,wBAAwB,CACtC,oDACF,CAAC;IAED,IAAIlB,SAAS,EAAEiB,GAAG,CAACE,KAAK,GAAGnB,SAAS;;IAEpC;IACAiB,GAAG,CAACG,OAAO,GAAG;MAAA,IAAAC,kBAAA;MAAA,QAAAA,kBAAA,GAAMlC,SAAS,CAACmC,OAAO,cAAAD,kBAAA,uBAAjBA,kBAAA,CAAmBE,IAAI,CAAC,CAAC;IAAA;IAC7CN,GAAG,CAACO,KAAK,GAAG;MAAA,IAAAC,mBAAA;MAAA,QAAAA,mBAAA,GAAMtC,SAAS,CAACmC,OAAO,cAAAG,mBAAA,uBAAjBA,mBAAA,CAAmBC,IAAI,CAAC,CAAC;IAAA;IAC3CT,GAAG,CAACU,OAAO,GAAG;MAAA,IAAAC,mBAAA;MAAA,QAAAA,mBAAA,GAAMzC,SAAS,CAACmC,OAAO,cAAAM,mBAAA,uBAAjBA,mBAAA,CAAmBF,IAAI,CAAC,CAAC;IAAA;IAE7CpC,KAAK,CAACuC,KAAK,CAACZ,GAAG,CAAC;EAClB,CAAC;EAED,oBACEjC,OAAA;IAAK8C,SAAS,EAAC,KAAK;IAAAC,QAAA,gBAClB/C,OAAA;MAAA+C,QAAA,EAAI;IAAiB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eAC1BnD,OAAA,CAACH,MAAM;MACLuD,SAAS,EAAEjD,SAAU;MACrBkD,aAAa,EAAEvD,aAAc;MAC7BwD,IAAI;MACJC,QAAQ,EAAE,KAAM;MAChBC,KAAK,EAAE;QAAEC,MAAM,EAAE;MAAI;IAAE;MAAAT,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACxB,CAAC,eACFnD,OAAA;MAAQ0D,OAAO,EAAE5B,UAAW;MAAAiB,QAAA,EACzB/B,SAAS,GAAG,gBAAgBA,SAAS,CAACM,IAAI,GAAG,GAAG;IAAM;MAAA0B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACjD,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACN,CAAC;AAEV;AAACjD,EAAA,CAjFQD,GAAG;AAAA0D,EAAA,GAAH1D,GAAG;AAmFZ,eAAeA,GAAG;AAAC,IAAA0D,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}